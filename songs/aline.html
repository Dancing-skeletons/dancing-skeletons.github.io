<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>aline.md</title>
<link rel="stylesheet" href="../styles.css"> 
<script src="https://pianosnake.github.io/uke-chord/webcomponents-lite.min.js"></script>
<script src="https://pianosnake.github.io/uke-chord/uke-chord.js"></script>
<script src="https://www.verovio.org/javascript/latest/verovio-toolkit.js"></script>
</head>
<body>
<button id="toggle-columns">Colonnes</button>
<button id="toggle-chords">Vue accords</button>
<div id="content" class="two-column">
<h1>Aline (Uku heaven) - Christophe</h1>
<h2>Accords uku 1:</h2>
<p><uke-chord name="C" frets="0003" size="1" class="chord-large"></uke-chord><uke-chord name="C" frets="0003" size="0.7" class="chord-small"></uke-chord>
<uke-chord name="E7" frets="1202" size="1" class="chord-large"></uke-chord><uke-chord name="E7" frets="1202" size="0.7" class="chord-small"></uke-chord>
<uke-chord name="F" frets="2010" size="1" class="chord-large"></uke-chord><uke-chord name="F" frets="2010" size="0.7" class="chord-small"></uke-chord>
<uke-chord name="G" frets="0232" size="1" class="chord-large"></uke-chord><uke-chord name="G" frets="0232" size="0.7" class="chord-small"></uke-chord>
<uke-chord name="G7" frets="0212" size="1" class="chord-large"></uke-chord><uke-chord name="G7" frets="0212" size="0.7" class="chord-small"></uke-chord></p>
<h2>Accords uku 2:</h2>
<p><uke-chord name="C" frets="3211" position=3 size="1" class="chord-large"></uke-chord><uke-chord name="C" frets="3211" position=3 size="0.7" class="chord-small"></uke-chord>
<uke-chord name="E7" frets="2225" position=3 size="1" class="chord-large"></uke-chord><uke-chord name="E7" frets="2225" position=3 size="0.7" class="chord-small"></uke-chord>
<uke-chord name="F6" frets="0333" position=3 size="1" class="chord-large"></uke-chord><uke-chord name="F6" frets="0333" position=3 size="0.7" class="chord-small"></uke-chord>
<uke-chord name="G" frets="0553" position=3 size="1" class="chord-large"></uke-chord><uke-chord name="G" frets="0553" position=3 size="0.7" class="chord-small"></uke-chord>
<uke-chord name="G7" frets="0353" position=3 size="1" class="chord-large"></uke-chord><uke-chord name="G7" frets="0353" position=3 size="0.7" class="chord-small"></uke-chord></p>
<h2>Instructions:</h2>
<ul>
<li>Intro: chaque accord dure 4 temps, jou√© ‚ñº‚ñº‚ñº.</li>
<li>Couplets: chaque accord dure 4 temps, arp√®ge du type (4321) pour <sup class="big-sup">C E7 F</sup>, ‚ñº‚ñº‚ñº sur <sup class="big-sup">G</sup>, suivi de <sup class="big-sup">G7</sup>.</li>
<li>Refrain: chaque accord dure 2 temps, ‚ñº‚ñº‚ñº pour chaque accord.</li>
<li>Refrain: re<sup class="big-sup">G</sup>vienne √† faire en <sup class="big-sup">G G G7</sup>.</li>
</ul>
<h2>Paroles:</h2>
<div class="highlight">
<h3>Intro: sans paroles</h3>
<p><sup class="big-sup">C E7 F G</sup></p>
</div>
<h3>Couplet</h3>
<p>J'avais dessi<sup class="big-sup">C</sup>n√©, sur le <sup class="big-sup">E7</sup>sable<br>
Son doux vi<sup class="big-sup">F</sup>sage qui me souri<sup class="big-sup">G</sup>ait<br>
Puis il a <sup class="big-sup">C</sup>plu, sur cette <sup class="big-sup">E7</sup>plage<br>
Dans cet o<sup class="big-sup">F</sup>rage, elle a dispa<sup class="big-sup">G</sup>ru</p>
<div class="highlight">
<h3>Refrain</h3>
<p>Et j'ai <sup class="big-sup">C</sup>cri√©, cri<sup class="big-sup">E7</sup>√©<br>
A<sup class="big-sup">F</sup>line, pour qu'elle re<sup class="big-sup">G</sup>vienne<br>
Et j'ai pleu<sup class="big-sup">C</sup>r√©, pleu<sup class="big-sup">E7</sup>r√©<br>
Oh <sup class="big-sup">F</sup>j'avais trop de <sup class="big-sup">G</sup>peine</p>
</div>
<h3>Couplet</h3>
<p>Je me suis a<sup class="big-sup">C</sup>ssis, aupr√®s de son <sup class="big-sup">E7</sup>√¢me<br>
Mais la belle <sup class="big-sup">F</sup>dame s'√©tait en<sup class="big-sup">G</sup>fuie<br>
Je l'ai cher<sup class="big-sup">C</sup>ch√©e, sans plus y <sup class="big-sup">E7</sup>croire<br>
Et sans un <sup class="big-sup">F</sup>espoir pour me <sup class="big-sup">G</sup>guider</p>
<div class="highlight">
<h3>Refrain</h3>
</div>
<h3>Couplet</h3>
<p>Je n'ai gar<sup class="big-sup">C</sup>d√©, que ce doux vi<sup class="big-sup">E7</sup>sage<br>
Comme une √©pave <sup class="big-sup">F</sup>sur le sable mou<sup class="big-sup">G</sup>ill√©</p>
<div class="highlight">
<h3>Refrain x2</h3>
</div>

</div>
  <script>
  const btn = document.getElementById('toggle-columns');
    const content = document.getElementById('content');

    // Possible column classes
    const columnClasses = ['one-column', 'two-column', 'three-column'];
    let current = 1; // start at 0 = one-column

    btn.addEventListener("click", () => {
      // Remove old class
      content.classList.remove(columnClasses[current]);

      // Increment and wrap around
      current = (current + 1) % columnClasses.length;

      // Add new class
      content.classList.add(columnClasses[current]);

      // Update button text
//      btn.textContent = (current + 1) + " Colonne" + (current > 0 ? "s" : "");    
       setTimeout(() => {
  document.dispatchEvent(new Event("verovio:rerender"));
}, 0);
      });

        // üé∏ Uke chord toggle
  const chordBtn = document.getElementById('toggle-chords');
  let chordsVisible = true;
  let chordsSize = 1;

  chordBtn.addEventListener("click", () => {
    chordsSize = (chordsSize + 1) % 3;
    chordsVisible = (chordsSize > 0);
    document.querySelectorAll("uke-chord").forEach(chord => {
      chord.style.display = chordsVisible ? "inline-block" : "none";
    });
document.querySelectorAll(".chord-large").forEach(el => el.style.display = chordsSize === 1 ? "inline-block" : "none");
document.querySelectorAll(".chord-small").forEach(el => el.style.display = chordsSize === 2 ? "inline-block" : "none");


    
   // Toggle only <h2> with text "Accords:"
    document.querySelectorAll("h2").forEach(h2 => {
      if (h2.textContent.includes("Accords")) {
        h2.style.display = chordsVisible ? "block" : "none";
      }
    });
    //chordBtn.textContent = chordsSize;
    

  });

(() => {
  const toolkit = new verovio.toolkit();

  function renderAllVerovio() {
    const blocks = document.querySelectorAll(".verovio-block");

    blocks.forEach(block => {
      try {
      const xml = decodeURIComponent(block.dataset.musicxml);
        const width = block.clientWidth || 800;
        const containerWidth = block.clientWidth || 800; // px

        const svg = toolkit.renderData(xml, {
          scale: 105,
          pageWidth: containerWidth * 2,  // width in tenths
          pageHeight: 2000,
          spacingStaff: 14,
          spacingSystem: 22,
          adjustPageHeight: true,
          breaks: "auto",
          header: "none",
          footer: "none"
        });

        block.innerHTML = svg;
      } catch (e) {
        console.error("Verovio error:", e);
        block.innerHTML =
          "<pre style='color:red'>MusicXML failed to render</pre>";
      }
    });
  }

  // Initial render
  document.addEventListener("DOMContentLoaded", renderAllVerovio);

  // Re-render on resize (columns change)
  let resizeTimer;
  window.addEventListener("resize", () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(renderAllVerovio, 150);
  });

  // Print support
  window.addEventListener("beforeprint", renderAllVerovio);
  window.addEventListener("afterprint", renderAllVerovio);

  // Manual trigger (column button)
  document.addEventListener("verovio:rerender", renderAllVerovio);
})();

</script>

  </body>
</html>